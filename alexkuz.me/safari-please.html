<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Safari, please</title>
	<style type="text/css">
		body {
			display: flex;
			flex-direction: column;
			gap: 1rem;
		}

		section {
			border: 1px solid lightgray;
			padding: 1rem;
		}

		.result {
			background: whitesmoke;
			padding: 1rem;
		}

		.result[data-status='failure'] {
			background: pink;
		}
		
		.result[data-status='success'] {
			background: palegreen;
		}		
	</style>
</head>
<body>
	<section>
		<pre>
			.gz
			Content-Encoding: gzip
			Content-Type: application/octet-stream
		</pre>
		<div class="result" id="app-result">Loading...</div>
	</section>
	<section>
		<pre>
			.jgz
			Content-Encoding: gzip
			Content-Type: application/octet-stream
		</pre>
		<div class="result" id="app-jgz-result">Loading...</div>
	</section>
	<section>
		<pre>
			.zip
			Content-Encoding: gzip
			Content-Type: application/octet-stream
		</pre>
		<div class="result" id="app-zip-result">Loading...</div>
	</section>
	<section>
		<pre>
			Content-Encoding: br
			Content-Type: application/octet-stream
		</pre>
		<div class="result" id="app-br-result">Loading...</div>
	</section>
	<script type="text/javascript">
		let appEl = document.getElementById("app-result");
		let appJgzEl = document.getElementById("app-jgz-result");
		let appBrEl = document.getElementById("app-br-result");
		let appZipEl = document.getElementById("app-zip-result");

		fetch('/files/application.json.gz').then(res => res.json()).then(json => {
			appEl.setAttribute('data-status', 'success');
			appEl.innerHTML = 'Success!';
		}).catch(e => {
			appEl.setAttribute('data-status', 'failure');
			appEl.innerHTML = 'Failure :(';
		})

		fetch('/files/application.json.jgz').then(res => res.json()).then(json => {
			appJgzEl.setAttribute('data-status', 'success');
			appJgzEl.innerHTML = 'Success!';
		}).catch(e => {
			appJgzEl.setAttribute('data-status', 'failure');
			appJgzEl.innerHTML = 'Failure :(';
		})

		fetch('/files/application.json.zip').then(res => res.json()).then(json => {
			appZipEl.setAttribute('data-status', 'success');
			appZipEl.innerHTML = 'Success!';
		}).catch(e => {
			appZipEl.setAttribute('data-status', 'failure');
			appZipEl.innerHTML = 'Failure :(';
		})

		fetch('/files/application.json.br').then(res => res.json()).then(json => {
			appBrEl.setAttribute('data-status', 'success');
			appBrEl.innerHTML = 'Success!';
		}).catch(e => {
			appBrEl.setAttribute('data-status', 'failure');
			appBrEl.innerHTML = 'Failure :(';
		})
	</script>
</body>
</html>