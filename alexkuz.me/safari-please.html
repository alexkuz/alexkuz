<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Safari, please</title>
	<style type="text/css">
		body {
			display: flex;
			flex-direction: column;
			gap: 2rem;
		}

		section {
			border: 1px solid lightgray;
			padding: 2rem;
		}

		.result {
			background: whitesmoke;
			padding: 2rem;
		}

		.result[data-status='failure'] {
			background: pink;
		}
		
		.result[data-status='success'] {
			background: palegreen;
		}		
	</style>
</head>
<body>
	<section>
		<pre>
			Content-Type: application/octet-stream
		</pre>
		<div class="result" id="application-result">Loading...</div>
	</section>
	<section>
		<pre>
			Content-Type: binary/octet-stream
		</pre>
		<div class="result" id="binary-result">Loading...</div>
	</section>
	<section>
		<pre>
			Content-Type: application/json
		</pre>
		<div class="result" id="json-result">Loading...</div>
	</section>
	<script type="text/javascript">
		let appEl = document.getElementById("application-result");
		let binEl = document.getElementById("binary-result");
		let jsonEl = document.getElementById("json-result");

		fetch('/files/application.json.gz').then(res => res.json()).then(json => {
			appEl.setAttribute('data-status', 'success');
			appEl.innerHTML = 'Success!';
		}).catch(e => {
			appEl.setAttribute('data-status', 'failure');
			appEl.innerHTML = 'Failure :(';
		})

		fetch('/files/binary.json.gz').then(res => res.json()).then(json => {
			binEl.setAttribute('data-status', 'success');
			binEl.innerHTML = 'Success!';
		}).catch(e => {
			binEl.setAttribute('data-status', 'failure');
			binEl.innerHTML = 'Failure :(';
		})

		fetch('/files/json.json.gz').then(res => res.json()).then(json => {
			jsonEl.setAttribute('data-status', 'success');
			jsonEl.innerHTML = 'Success!';
		}).catch(e => {
			jsonEl.setAttribute('data-status', 'failure');
			jsonEl.innerHTML = 'Failure :(';
		})
	</script>
</body>
</html>